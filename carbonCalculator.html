<!DOCTYPE html>

<head>
    <title>Carbon Emission Calculator</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/calculator.css">
    <!-- import icon -->
    <link rel="shortcut icon" href="Image/logo.png" type="image/x-icon" />
</head>

<body>
    <!-- header starts  -->
    <div class="header">
        <a href="profile.html">
            <h1 class="sub_t">
                Carbon Emission Calculator
            </h1>
        </a>
    </div>
    <!-- header ends -->

    <div class="testbox">
        <form onsubmit="return false">
            <div class="Header">
                <p id="houseHeader" class="current">Household Emissions and Transportation</p>
                <p id="foodHeader">Food Consumption</p>
            </div>
            <div class="clearfix"></div>
            <div id="housePage">
                <div>
                    <h4>Electricity used in your household:</h4>
                    <div id="q1" class="question-answer">
                        <label><input type="radio" value="2.44" onclick="showValue('q1', 0.93)" name="houseElectric" />Small house / flat (3,000 kWh)</label>
                        <label><input type="radio" value="3.65" onclick="showValue('q1', 1.48)" name="houseElectric" />Medium (4,800 kWh)</label>
                        <label><input type="radio" value="5.48" onclick="showValue('q1', 2.16)" name="houseElectric" />Large house (7,000 kWh)</label>
                        <label><input type="radio" value="1.01" onclick="showValue('q1', 0.62)" name="houseElectric" />Hall of residence (2,000 kWh)</label>
                    </div>
                </div>
                <div>
                    <h4>Gas used in your household:</h4>
                    <div id="q2" class="question-answer">
                        <label><input type="radio" value="2.44" onclick="showValue('q2', 2.44)" name="houseGas" />Once a week</label>
                        <label><input type="radio" value="3.65" onclick="showValue('q2', 3.65)" name="houseGas" />2 or 3 times a month</label>
                        <label><input type="radio" value="5.48" onclick="showValue('q2', 5.48)" name="houseGas" />Once a month</label>
                        <label><input type="radio" value="1.01" onclick="showValue('q2', 1.01)" name="houseGas" />Less than once a month</label>
                    </div>
                </div>
                <div>
                    <h4>Transportation type and car mileage (per year):</h4>
                    <div id="q3" class="question-answer">
                        <label><input type="radio" value="35" onclick="calcCarEmission()" name="carType" />Motorcycle (46 mpg)</label>
                        <label><input type="radio" value="46" onclick="calcCarEmission()" name="carType" />Sedan (35 mpg)</label>
                        <label><input type="radio" value="52" onclick="calcCarEmission()" name="carType" />SUV (52 mpg)</label>
                        <h4>Enter actual mpg:</h4>

                        <label><input type="radio" value="6000" onclick="calcCarEmission()" name="mileage" />Low (6,000 miles)</label>
                        <label><input type="radio" value="9000" onclick="calcCarEmission()" name="mileage" />Average (9,000 miles)</label>
                        <label><input type="radio" value="12000" onclick="calcCarEmission()" name="mileage" />High (12,000+ miles)</label>
                    </div>
                </div>
                <div id="q3" class="clearfix"></div>
                <br>

                <br>
                <p id="totalOutput">The total carbon emission you create based on household and transportation is: </p>
                <div class="btn-block">
                    <button onclick="location.href='/profile.html';calculateTotal()">Save Changes</button>

                </div>
            </div>
            <div id="foodPage" style="display: none;">
                <div class="content">
                    <div class="title">
                        <div class="total">The total carbon emission you save for this week‘s food is:</div>
                        <i class="num green">3.5</i><i class="tons">tons</i>
                    </div>
                    <div class="block">
                        <div class="date">Wed/Jan 21, 17:00</div>
                        <div class="left">
                            <img src="Image/food1.png" alt="">
                            <p>Biryani Pot</p>
                        </div>
                        <div class="right">
                            <p>Food name: Vegetarian Biryani </p>
                            <p class="count">Emission count:</p>
                            <i class="num"> 1.5 / 5 </i><i>tons of CO2 used</i>
                        </div>
                    </div>
                    <div class="block">
                        <div class="date">Wed/Jan 21, 17:00</div>
                        <div class="left">
                            <img src="Image/food2.png" alt="">
                            <p>Biryani Pot</p>
                        </div>
                        <div class="right">
                            <p>Food name: Vegetarian Biryani </p>
                            <p class="count">Emission count:</p>
                            <i class="num"> 1.5 / 5 </i><i>tons of CO2 used</i>
                        </div>
                    </div>
                    <div class="block">
                        <div class="date">Wed/Jan 21, 17:00</div>
                        <div class="left">
                            <img src="Image/food3.png" alt="">
                            <p>Biryani Pot</p>
                        </div>
                        <div class="right">
                            <p>Food name: Vegetarian Biryani </p>
                            <p class="count">Emission count:</p>
                            <i class="num"> 1.5 / 5 </i><i>tons of CO2 used</i>
                        </div>
                    </div>
                    <div class="block">
                        <div class="date">Wed/Jan 21, 17:00</div>
                        <div class="left">
                            <img src="Image/food4.png" alt="">
                            <p>Biryani Pot</p>
                        </div>
                        <div class="right">
                            <p>Food name: Vegetarian Biryani </p>
                            <p class="count">Emission count:</p>
                            <i class="num"> 1.5 / 5 </i><i>tons of CO2 used</i>
                        </div>
                    </div>
                    <div class="block">
                        <div class="date">Wed/Jan 21, 17:00</div>
                        <div class="left">
                            <img src="Image/food5.png" alt="">
                            <p>Biryani Pot</p>
                        </div>
                        <div class="right">
                            <p>Food name: Vegetarian Biryani </p>
                            <p class="count">Emission count:</p>
                            <i class="num"> 1.5 / 5 </i><i>tons of CO2 used</i>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!-- footer starts  -->
    <div class="footer">
        <div class="info">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="#">Help</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </div>
    </div>
    <!-- footer ends  -->
    </form>
    </div>

    </div>
</body>

</html>




<script>
    let rbs;
    let selectedValue;
    let houseTotal = 0;
    let mpg;
    let mileage;
    let ccounts = 0;
    let house2 = 0;
    let car2 = 0;

    //toggle between household and food calculator
    //NOTE: will create separate page for food calculator instead
    // function togglePage(requestedPage, otherPage) {
    //     console.log('IN TOGGLE');
    //     requestedPage = document.getElementById(requestedPage);
    //     otherPage = document.getElementById(otherPage);
    //     if (requestedPage.style.display == "none") {
    //         console.log('IN IF')
    //         requestedPage.style.display = "block";
    //         requestedPage.className = 'current';
    //     }
    // }

    //displays subtotal underneath question
    function showValue(questionNumber, carbonTonne) {
        let existingPreview = document.getElementById(`${questionNumber}Preview`);
        let question = document.getElementById(questionNumber);
        let preview = document.createElement('p');
        if (existingPreview) {
            existingPreview.remove();
        }

        let content = `<p class="subValue" data-subtotal=${carbonTonne} id="${questionNumber}Preview">CO2 counts  ${carbonTonne.toFixed(2).bold()} tons </p>`;
        preview.innerHTML = content;
        question.appendChild(preview);
        ccounts += 1;
        calculateTotal(ccounts);
        if (ccounts <= 2) {
            //find carbon only in the household
            house2 = parseFloat(house2) + parseFloat(carbonTonne)
        }
    }
    //calculates final total of co2
    function calculateTotal(num) {
        let currVal;
        let subtotals = document.getElementsByClassName("subValue");
        let displayParagraph = document.getElementById("totalOutput");
        houseTotal = 0;
        for (var i = 0; i < subtotals.length; i++) {
            currVal = subtotals[i].getAttribute("data-subtotal");
            console.log(currVal)
            houseTotal += +currVal;
        }

        let content = `The total cabon emission you create based on household and transportation is: ${houseTotal.toFixed(2).bold()} tons`;
        displayParagraph.innerHTML = content;
        console.log("house total: " + houseTotal);
        if (num == 10) {
            window.location.href = 'profile.html?Total=' + houseTotal.toFixed(2) + "&house=" + house2.toFixed(2) + "&car=" + car2;
        };
    }



    //checks if both mileage and transport type are selected and set values
    function checkBoth() {
        rbs = document.querySelectorAll('input[name="carType"]');
        for (let rb of rbs) {
            if (rb.checked) {
                mpg = +rb.getAttribute("value")
                console.log(mpg);
                break;
            }
        }
        rbs = document.querySelectorAll('input[name="mileage"]');
        for (let rb of rbs) {
            if (rb.checked) {
                mileage = +rb.getAttribute("value")
                console.log(mileage);
                break;
            }
        }
        return [mpg, mileage]
    }

    //calculates car emissions
    function calcCarEmission() {
        let totalEmission;
        result = checkBoth()
        mpg = result[0];
        mileage = result[1]
        if (mpg && mileage) {
            totalEmission = ((mileage / mpg) * .0143)
            console.log(totalEmission);
            showValue('q3', totalEmission);
        }
        if (ccounts == 3) {
            car2 = parseFloat(totalEmission).toFixed(2);
            console.log("car2" + car2);
        }
    }


    var house = document.getElementById("houseHeader");
    var food = document.getElementById("foodHeader");
    var hp = document.getElementById("housePage");
    var fp = document.getElementById("foodPage");
    house.addEventListener("click", function() {
        house.className = "current";
        food.className = '';
        hp.style.display = 'block';
        fp.style.display = 'none';
    })
    food.addEventListener("click", function() {
        food.className = "current";
        house.className = '';
        hp.style.display = 'none';
        fp.style.display = 'block';
    })
</script>

</body>

</html>
